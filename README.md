# reactive-function

一个简单的响应式函数关联工具。一个**主动**调用函数，与若干个**被动**调用函数之间立依赖，当主动函数被调用，被动函数都被调用。


## 用法示例

见 [demo](./demo) 目录下的示例代码。按钮的点击事件监听器，专注更新计数，避免手动更新视图。

## API

### `link(passive, active)`

建立被动函数与主动函数的关联关系。

- 参数：
  - `passive`: 被动函数，当关联的主动函数被 `effect()` 触发时执行
  - `active`: 主动函数，作为关联关系的键

### `effect(f)`

触发与主动函数 `f` 关联的所有被动函数。

- 参数：
  - `f`: 主动函数，用于查找关联的被动函数集合
  - 功能：当调用 `effect(f)` 时，会执行所有通过 `link` 方法与 `f` 关联的被动函数

## 实现原理

内部使用 `WeakMap` 存储函数间的关联关系：
- 键：主动函数（`active`）
- 值：`Set` 集合，存储所有与该主动函数关联的被动函数（`passive`）

当调用 `link(passive, active)` 时，会将被动函数添加到主动函数对应的 `Set` 集合中。当调用 `effect(f)` 时，会遍历 `f` 对应的 `Set` 集合并执行其中的所有被动函数。